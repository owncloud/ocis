// set the attribute to true or leave empty, true without any quotes.
// if the generated adoc file is used outside tabs, it renders correctly depending on the attribute set.
// if inside, you need to also use the xxx_deprecation.adoc file. attributes can't be defined inside tabs.

:show-deprecation: false

ifeval::[{show-deprecation} == true]

[#deprecation-note-2024-07-19-09-32-01]
[caption=]
.Deprecation notes for the idm service
[width="100%",cols="~,~,~,~",options="header"]
|===
| Deprecation Info
| Deprecation Version
| Removal Version
| Deprecation Replacement
|===

{empty} +

endif::[]

[caption=]
.Environment variables for the idm service
[width="100%",cols="~,~,~,~",options="header"]
|===
| Name
| Type
| Default Value
| Description

a|`OCIS_TRACING_ENABLED` +
`IDM_TRACING_ENABLED` +

a| [subs=-attributes]
++bool ++
a| [subs=-attributes]
++false ++
a| [subs=-attributes]
Activates tracing.

a|`OCIS_TRACING_TYPE` +
`IDM_TRACING_TYPE` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++ ++
a| [subs=-attributes]
The type of tracing. Defaults to '', which is the same as 'jaeger'. Allowed tracing types are 'jaeger' and '' as of now.

a|`OCIS_TRACING_ENDPOINT` +
`IDM_TRACING_ENDPOINT` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++ ++
a| [subs=-attributes]
The endpoint of the tracing agent.

a|`OCIS_TRACING_COLLECTOR` +
`IDM_TRACING_COLLECTOR` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++ ++
a| [subs=-attributes]
The HTTP endpoint for sending spans directly to a collector, i.e. \http://jaeger-collector:14268/api/traces. Only used if the tracing endpoint is unset.

a|`OCIS_LOG_LEVEL` +
`IDM_LOG_LEVEL` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++ ++
a| [subs=-attributes]
The log level. Valid values are: 'panic', 'fatal', 'error', 'warn', 'info', 'debug', 'trace'.

a|`OCIS_LOG_PRETTY` +
`IDM_LOG_PRETTY` +

a| [subs=-attributes]
++bool ++
a| [subs=-attributes]
++false ++
a| [subs=-attributes]
Activates pretty log output.

a|`OCIS_LOG_COLOR` +
`IDM_LOG_COLOR` +

a| [subs=-attributes]
++bool ++
a| [subs=-attributes]
++false ++
a| [subs=-attributes]
Activates colorized log output.

a|`OCIS_LOG_FILE` +
`IDM_LOG_FILE` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++ ++
a| [subs=-attributes]
The path to the log file. Activates logging to this file if set.

a|`IDM_DEBUG_ADDR` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++127.0.0.1:9239 ++
a| [subs=-attributes]
Bind address of the debug server, where metrics, health, config and debug endpoints will be exposed.

a|`IDM_DEBUG_TOKEN` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++ ++
a| [subs=-attributes]
Token to secure the metrics endpoint.

a|`IDM_DEBUG_PPROF` +

a| [subs=-attributes]
++bool ++
a| [subs=-attributes]
++false ++
a| [subs=-attributes]
Enables pprof, which can be used for profiling.

a|`IDM_DEBUG_ZPAGES` +

a| [subs=-attributes]
++bool ++
a| [subs=-attributes]
++false ++
a| [subs=-attributes]
Enables zpages, which can be used for collecting and viewing in-memory traces.

a|`IDM_LDAPS_ADDR` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++127.0.0.1:9235 ++
a| [subs=-attributes]
Listen address for the LDAPS listener (ip-addr:port).

a|`IDM_LDAPS_CERT` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++/var/lib/ocis/idm/ldap.crt ++
a| [subs=-attributes]
File name of the TLS server certificate for the LDAPS listener. If not defined, the root directory derives from $OCIS_BASE_DATA_PATH:/idm.

a|`IDM_LDAPS_KEY` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++/var/lib/ocis/idm/ldap.key ++
a| [subs=-attributes]
File name for the TLS certificate key for the server certificate. If not defined, the root directory derives from $OCIS_BASE_DATA_PATH:/idm.

a|`IDM_DATABASE_PATH` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++/var/lib/ocis/idm/ocis.boltdb ++
a| [subs=-attributes]
Full path to the IDM backend database. If not defined, the root directory derives from $OCIS_BASE_DATA_PATH:/idm.

a|`IDM_CREATE_DEMO_USERS` +

a| [subs=-attributes]
++bool ++
a| [subs=-attributes]
++false ++
a| [subs=-attributes]
Flag to enable or disable the creation of the demo users.

a|`IDM_ADMIN_PASSWORD` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++ ++
a| [subs=-attributes]
Password to set for the oCIS 'admin' user. Either cleartext or an argon2id hash.

a|`IDM_SVC_PASSWORD` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++ ++
a| [subs=-attributes]
Password to set for the 'idm' service user. Either cleartext or an argon2id hash.

a|`IDM_REVASVC_PASSWORD` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++ ++
a| [subs=-attributes]
Password to set for the 'reva' service user. Either cleartext or an argon2id hash.

a|`IDM_IDPSVC_PASSWORD` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++ ++
a| [subs=-attributes]
Password to set for the 'idp' service user. Either cleartext or an argon2id hash.

a|`OCIS_ADMIN_USER_ID` +
`IDM_ADMIN_USER_ID` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++ ++
a| [subs=-attributes]
ID of the user that should receive admin privileges. Consider that the UUID can be encoded in some LDAP deployment configurations like in .ldif files. These need to be decoded beforehand.
|===

