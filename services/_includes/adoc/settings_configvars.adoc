// set the attribute to true or leave empty, true without any quotes.

:show-deprecation: false

ifeval::[{show-deprecation} == true]

[#deprecation-note-2024-06-13-00-51-19]
[caption=]
.Deprecation notes for the settings service
[width="100%",cols="~,~,~,~",options="header"]
|===
| Deprecation Info
| Deprecation Version
| Removal Version
| Deprecation Replacement
|===

endif::[]

[caption=]
.Environment variables for the settings service
[width="100%",cols="~,~,~,~",options="header"]
|===
| Name
| Type
| Default Value
| Description

a|`OCIS_TRACING_ENABLED` +
`SETTINGS_TRACING_ENABLED` +

a| [subs=-attributes]
++bool ++
a| [subs=-attributes]
++false ++
a| [subs=-attributes]
Activates tracing.

a|`OCIS_TRACING_TYPE` +
`SETTINGS_TRACING_TYPE` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++ ++
a| [subs=-attributes]
The type of tracing. Defaults to '', which is the same as 'jaeger'. Allowed tracing types are 'jaeger' and '' as of now.

a|`OCIS_TRACING_ENDPOINT` +
`SETTINGS_TRACING_ENDPOINT` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++ ++
a| [subs=-attributes]
The endpoint of the tracing agent.

a|`OCIS_TRACING_COLLECTOR` +
`SETTINGS_TRACING_COLLECTOR` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++ ++
a| [subs=-attributes]
The HTTP endpoint for sending spans directly to a collector, i.e. \http://jaeger-collector:14268/api/traces. Only used if the tracing endpoint is unset.

a|`OCIS_LOG_LEVEL` +
`SETTINGS_LOG_LEVEL` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++ ++
a| [subs=-attributes]
The log level. Valid values are: 'panic', 'fatal', 'error', 'warn', 'info', 'debug', 'trace'.

a|`OCIS_LOG_PRETTY` +
`SETTINGS_LOG_PRETTY` +

a| [subs=-attributes]
++bool ++
a| [subs=-attributes]
++false ++
a| [subs=-attributes]
Activates pretty log output.

a|`OCIS_LOG_COLOR` +
`SETTINGS_LOG_COLOR` +

a| [subs=-attributes]
++bool ++
a| [subs=-attributes]
++false ++
a| [subs=-attributes]
Activates colorized log output.

a|`OCIS_LOG_FILE` +
`SETTINGS_LOG_FILE` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++ ++
a| [subs=-attributes]
The path to the log file. Activates logging to this file if set.

a|`SETTINGS_DEBUG_ADDR` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++127.0.0.1:9194 ++
a| [subs=-attributes]
Bind address of the debug server, where metrics, health, config and debug endpoints will be exposed.

a|`SETTINGS_DEBUG_TOKEN` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++ ++
a| [subs=-attributes]
Token to secure the metrics endpoint.

a|`SETTINGS_DEBUG_PPROF` +

a| [subs=-attributes]
++bool ++
a| [subs=-attributes]
++false ++
a| [subs=-attributes]
Enables pprof, which can be used for profiling.

a|`SETTINGS_DEBUG_ZPAGES` +

a| [subs=-attributes]
++bool ++
a| [subs=-attributes]
++false ++
a| [subs=-attributes]
Enables zpages, which can be used for collecting and viewing in-memory traces.

a|`SETTINGS_HTTP_ADDR` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++127.0.0.1:9190 ++
a| [subs=-attributes]
The bind address of the HTTP service.

a|`OCIS_HTTP_TLS_ENABLED` +

a| [subs=-attributes]
++bool ++
a| [subs=-attributes]
++false ++
a| [subs=-attributes]
Activates TLS for the http based services using the server certifcate and key configured via OCIS_HTTP_TLS_CERTIFICATE and OCIS_HTTP_TLS_KEY. If OCIS_HTTP_TLS_CERTIFICATE is not set a temporary server certificate is generated - to be used with PROXY_INSECURE_BACKEND=true.

a|`OCIS_HTTP_TLS_CERTIFICATE` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++ ++
a| [subs=-attributes]
Path/File name of the TLS server certificate (in PEM format) for the http services.

a|`OCIS_HTTP_TLS_KEY` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++ ++
a| [subs=-attributes]
Path/File name for the TLS certificate key (in PEM format) for the server certificate to use for the http services.

a|`SETTINGS_HTTP_ROOT` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++/ ++
a| [subs=-attributes]
Subdirectory that serves as the root for this HTTP service.

a|`OCIS_CORS_ALLOW_ORIGINS` +
`SETTINGS_CORS_ALLOW_ORIGINS` +

a| [subs=-attributes]
++[]string ++
a| [subs=-attributes]
++[*] ++
a| [subs=-attributes]
A list of allowed CORS origins. See following chapter for more details: *Access-Control-Allow-Origin* at \https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Origin. See the Environment Variable Types description for more details.

a|`OCIS_CORS_ALLOW_METHODS` +
`SETTINGS_CORS_ALLOW_METHODS` +

a| [subs=-attributes]
++[]string ++
a| [subs=-attributes]
++[GET POST PUT PATCH DELETE OPTIONS] ++
a| [subs=-attributes]
A list of allowed CORS methods. See following chapter for more details: *Access-Control-Request-Method* at \https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Request-Method. See the Environment Variable Types description for more details.

a|`OCIS_CORS_ALLOW_HEADERS` +
`SETTINGS_CORS_ALLOW_HEADERS` +

a| [subs=-attributes]
++[]string ++
a| [subs=-attributes]
++[Authorization Origin Content-Type Accept X-Requested-With X-Request-Id] ++
a| [subs=-attributes]
A list of allowed CORS headers. See following chapter for more details: *Access-Control-Request-Headers* at \https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Request-Headers. See the Environment Variable Types description for more details.

a|`OCIS_CORS_ALLOW_CREDENTIALS` +
`SETTINGS_CORS_ALLOW_CREDENTIALS` +

a| [subs=-attributes]
++bool ++
a| [subs=-attributes]
++true ++
a| [subs=-attributes]
Allow credentials for CORS.See following chapter for more details: *Access-Control-Allow-Credentials* at \https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Credentials.

a|`SETTINGS_GRPC_ADDR` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++127.0.0.1:9191 ++
a| [subs=-attributes]
The bind address of the GRPC service.

a|`STORAGE_GATEWAY_GRPC_ADDR` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++com.owncloud.api.storage-system ++
a| [subs=-attributes]
GRPC address of the STORAGE-SYSTEM service.

a|`STORAGE_GRPC_ADDR` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++com.owncloud.api.storage-system ++
a| [subs=-attributes]
GRPC address of the STORAGE-SYSTEM service.

a|`OCIS_SYSTEM_USER_ID` +
`SETTINGS_SYSTEM_USER_ID` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++ ++
a| [subs=-attributes]
ID of the oCIS STORAGE-SYSTEM system user. Admins need to set the ID for the STORAGE-SYSTEM system user in this config option which is then used to reference the user. Any reasonable long string is possible, preferably this would be an UUIDv4 format.

a|`OCIS_SYSTEM_USER_IDP` +
`SETTINGS_SYSTEM_USER_IDP` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++internal ++
a| [subs=-attributes]
IDP of the oCIS STORAGE-SYSTEM system user.

a|`OCIS_SYSTEM_USER_API_KEY` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++ ++
a| [subs=-attributes]
API key for the STORAGE-SYSTEM system user.

a|`OCIS_CACHE_STORE` +
`SETTINGS_CACHE_STORE` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++memory ++
a| [subs=-attributes]
The type of the cache store. Supported values are: 'memory', 'redis-sentinel', 'nats-js-kv', 'noop'. See the text description for details.

a|`OCIS_CACHE_STORE_NODES` +
`SETTINGS_CACHE_STORE_NODES` +

a| [subs=-attributes]
++[]string ++
a| [subs=-attributes]
++[127.0.0.1:9233] ++
a| [subs=-attributes]
A list of nodes to access the configured store. This has no effect when 'memory' or 'ocmem' stores are configured. Note that the behaviour how nodes are used is dependent on the library of the configured store. See the Environment Variable Types description for more details.

a|`OCIS_CACHE_DATABASE` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++settings-cache ++
a| [subs=-attributes]
The database name the configured store should use.

a|`SETTINGS_FILE_CACHE_TABLE` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++settings_files ++
a| [subs=-attributes]
The database table the store should use for the file cache.

a|`SETTINGS_DIRECTORY_CACHE_TABLE` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++settings_dirs ++
a| [subs=-attributes]
The database table the store should use for the directory cache.

a|`OCIS_CACHE_TTL` +
`SETTINGS_CACHE_TTL` +

a| [subs=-attributes]
++Duration ++
a| [subs=-attributes]
++10m0s ++
a| [subs=-attributes]
Default time to live for entries in the cache. Only applied when access tokens has no expiration. See the Environment Variable Types description for more details.

a|`OCIS_CACHE_SIZE` +
`SETTINGS_CACHE_SIZE` +

a| [subs=-attributes]
++int ++
a| [subs=-attributes]
++0 ++
a| [subs=-attributes]
The maximum quantity of items in the cache. Only applies when store type 'ocmem' is configured. Defaults to 512 which is derived from the ocmem package though not exclicitely set as default.

a|`OCIS_CACHE_DISABLE_PERSISTENCE` +
`SETTINGS_CACHE_DISABLE_PERSISTENCE` +

a| [subs=-attributes]
++bool ++
a| [subs=-attributes]
++false ++
a| [subs=-attributes]
Disables persistence of the cache. Only applies when store type 'nats-js-kv' is configured. Defaults to false.

a|`OCIS_CACHE_AUTH_USERNAME` +
`SETTINGS_CACHE_AUTH_USERNAME` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++ ++
a| [subs=-attributes]
The username to authenticate with the cache. Only applies when store type 'nats-js-kv' is configured.

a|`OCIS_CACHE_AUTH_PASSWORD` +
`SETTINGS_CACHE_AUTH_PASSWORD` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++ ++
a| [subs=-attributes]
The password to authenticate with the cache. Only applies when store type 'nats-js-kv' is configured.

a|`SETTINGS_BUNDLES_PATH` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++ ++
a| [subs=-attributes]
The path to a JSON file with a list of bundles. If not defined, the default bundles will be loaded.

a|`OCIS_ADMIN_USER_ID` +
`SETTINGS_ADMIN_USER_ID` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++ ++
a| [subs=-attributes]
ID of the user that should receive admin privileges. Consider that the UUID can be encoded in some LDAP deployment configurations like in .ldif files. These need to be decoded beforehand.

a|`OCIS_JWT_SECRET` +
`SETTINGS_JWT_SECRET` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++ ++
a| [subs=-attributes]
The secret to mint and validate jwt tokens.

a|`SETTINGS_SETUP_DEFAULT_ASSIGNMENTS` +
`IDM_CREATE_DEMO_USERS` +

a| [subs=-attributes]
++bool ++
a| [subs=-attributes]
++false ++
a| [subs=-attributes]
The default role assignments the demo users should be setup.

a|`SETTINGS_SERVICE_ACCOUNT_IDS` +
`OCIS_SERVICE_ACCOUNT_ID` +

a| [subs=-attributes]
++[]string ++
a| [subs=-attributes]
++[service-user-id] ++
a| [subs=-attributes]
The list of all service account IDs. These will be assigned the hidden 'service-account' role. Note: When using 'OCIS_SERVICE_ACCOUNT_ID' this will contain only one value while 'SETTINGS_SERVICE_ACCOUNT_IDS' can have multiple. See the 'auth-service' service description for more details about service accounts.

a|`OCIS_DEFAULT_LANGUAGE` +

a| [subs=-attributes]
++string ++
a| [subs=-attributes]
++ ++
a| [subs=-attributes]
The default language used by services and the WebUI. If not defined, English will be used as default. See the documentation for more details.
|===

