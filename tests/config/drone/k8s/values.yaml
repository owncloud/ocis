---
namespaceOverride: ocis
image:
  repository: owncloud/ocis-rolling
  tag: master
ingress:
  enabled: true
  ingressClassName: traefik
externalDomain: ocis-server
extraResources:
  - |
    apiVersion: v1
    kind: ConfigMap
    metadata:
      name: ocmproviders
      namespace: {{ template "ocis.namespace" . }}
      labels:
        {{- include "ocis.labels" . | nindent 8 }}
    data:
      ocmproviders.json: |
        [
          {
            "name": "Local oCIS",
            "full_name": "Local oCIS provider",
            "organization": "oCIS",
            "domain": "ocis-server",
            "homepage": "https://ocis-server",
            "description": "Local oCIS instance",
            "services": [
              {
                "endpoint": {
                  "type": {
                    "name": "OCM",
                    "description": "Local oCIS Open Cloud Mesh API"
                  },
                  "name": "ocis-server - OCM API",
                  "path": "https://ocis-server/ocm/",
                  "is_monitored": true
                },
                "api_version": "0.0.1",
                "host": "https://ocis-server"
              },
              {
                "endpoint": {
                    "type": {
                        "name": "Webdav",
                        "description": "ocis-server Webdav API"
                    },
                    "name": "ocis-server - Webdav API",
                    "path": "https://ocis-server/dav/",
                    "is_monitored": true
                },
                "api_version": "0.0.1",
                "host": "https://ocis-server"
            }
            ]
          },
          {
            "name": "Remote oCIS2",
            "full_name": "Remote oCIS provider",
            "organization": "oCIS",
            "domain": "ocis2-server",
            "homepage": "https://ocis2-server",
            "description": "Remote oCIS instance for ScienceMesh",
            "services": [
              {
                "endpoint": {
                  "type": {
                    "name": "OCM",
                    "description": "Remote oCIS2 Open Cloud Mesh API"
                  },
                  "name": "ocis2-server - OCM API",
                  "path": "https://ocis2-server/ocm/",
                  "is_monitored": true
                },
                "api_version": "0.0.1",
                "host": "https://ocis2-server"
              },
              {
                "endpoint": {
                    "type": {
                        "name": "Webdav",
                        "description": "ocis2-server Webdav API"
                    },
                    "name": "ocis2-server - Webdav API",
                    "path": "https://ocis2-server/dav/",
                    "is_monitored": true
                },
                "api_version": "0.0.1",
                "host": "https://ocis2-server"
            }
            ]
          }
        ]

logging:
  level: error
insecure:
  oidcIdpInsecure: true
  ocisHttpApiInsecure: true
  ocmInsecure: true
features:
  authapp:
    enabled: true
  emailNotifications:
    enabled: true
    smtp:
      host: mailpit
      port: 1025
      sender: 'oCIS <noreply@local.test>'
      authentication: none
      encryption: none
    branding:
      enabled: false
  virusscan:
    enabled: false
    infectedFileHandling: delete
  policies:
    enabled: false
  ocm:
    enabled: true
    providersConfigRef: "ocmproviders"
  sharing:
    passwordPolicies:
      bannedPasswords:
        - "password"
        - "123"
        - "12345678"
        - "ownCloud"
        - "owncloud-1"
  quotas:
    default: "1000000000"
    max: "0"

http:
  cors:
    allow_origins: []
  csp:
    directives:
      childSrc:
        - "'self'"
      connectSrc:
        - "'self'"
        - "blob: https://raw.githubusercontent.com/owncloud/awesome-ocis/"
      defaultSrc:
        - "'none'"
      fontSrc:
        - "'self'"
      frameAncestors:
        - "'self'"
      frameSrc:
        - "'self'"
        - "data: blob: https://embed.diagrams.net/"
      imgSrc:
        - "'self'"
        - "blob: https://raw.githubusercontent.com/owncloud/awesome-ocis/"
      manifestSrc:
        - "'self'"
      mediaSrc:
        - "'self'"
      objectSrc:
        - "'self'"
        - "blob:"
      scriptSrc:
        - "'self'"
        - "'unsafe-inline'"
      styleSrc:
        - "'self'"
        - "'unsafe-inline'"

services:
  idm:
    persistence:
      enabled: true
      accessModes:
        - ReadWriteOnce
  nats:
    persistence:
      enabled: true
      accessModes:
        - ReadWriteOnce
  storagesystem:
    persistence:
      enabled: true
      accessModes:
        - ReadWriteOnce
  storageusers:
    persistence:
      enabled: true
      accessModes:
        - ReadWriteOnce
  ocm:
    persistence:
      enabled: true
      accessModes:
        - ReadWriteOnce
  thumbnails:
    persistence:
      enabled: true
      accessModes:
        - ReadWriteOnce
  web:
    persistence:
      enabled: true
      accessModes:
        - ReadWriteOnce
  antivirus:
    events:
      consumer:
        concurrency: 10
secretRefs:
  notificationsSmtpSecretRef: notifications-smtp-secret
